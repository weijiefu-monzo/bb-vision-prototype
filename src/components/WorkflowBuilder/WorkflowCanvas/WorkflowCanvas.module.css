.canvas {
  flex: 1;
  min-width: 0;
  height: 100%;
  overflow: hidden;
  background-image: radial-gradient(
    circle at center,
    var(--semantic-background-secondary) 1px,
    transparent 1px
  );
  background-size: 8px 8px;
}

.flow {
  height: 100%;
  width: 100%;
}

/* Grab cursor when hovering over canvas, grabbing when dragging */
.flow .react-flow__pane,
.flow .react-flow__pane.draggable {
  cursor: grab;
}

.flow .react-flow__pane.dragging {
  cursor: grabbing;
}

/* Grab cursor on nodes, grabbing when dragging a node */
.flow .react-flow__node.draggable {
  cursor: grab;
}

.flow .react-flow__node.draggable.dragging {
  cursor: grabbing;
}

/* Visible connection handles – use !important to override React Flow defaults */
.flow .react-flow__handle {
  width: 12px !important;
  height: 12px !important;
  min-width: 12px !important;
  min-height: 12px !important;
  background-color: var(--semantic-background-primary, #ffffff) !important;
  border: 2px solid var(--semantic-separator, rgba(9, 23, 35, 0.1)) !important;
  pointer-events: all !important;
}

.flow .react-flow__handle:hover {
  background-color: var(--semantic-content-secondary, #4b5563) !important;
}

/* Center handles on node edge: top up 6px, bottom down 6px */
.flow .react-flow__handle-top {
  top: -6px !important;
}

.flow .react-flow__handle-bottom {
  bottom: -6px !important;
}

/* Dashed edges with flow-direction animation (source → target) */
@keyframes edgeFlow {
  from {
    stroke-dashoffset: 0;
  }
  to {
    stroke-dashoffset: -16;
  }
}

.flow .react-flow__edge-path {
  stroke: var(--semantic-content-secondary, #6b7280) !important;
  stroke-width: 2px !important;
  stroke-dasharray: 8 8 !important;
  fill: none !important;
  animation: edgeFlow 0.6s linear infinite !important;
}

.flow .react-flow__edge.selected .react-flow__edge-path,
.flow .react-flow__edge:hover .react-flow__edge-path {
  stroke: var(--semantic-content-primary, #111827) !important;
}

.flow .react-flow__connection-path {
  stroke: var(--semantic-content-secondary, #6b7280) !important;
  stroke-width: 2px !important;
  fill: none !important;
}
